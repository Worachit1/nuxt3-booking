# ЁЯФН AI Search Flow - р╕Др╕╣р╣Ир╕бр╕╖р╕нр╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ

## ЁЯУК Flow р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

### 1я╕ПтГг User р╕Юр╕┤р╕бр╕Юр╣Мр╕Др╕│р╕Др╣Йр╕Щр╕лр╕▓
```
Input: "р╕Йр╕▒р╕Щр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М"
```

### 2я╕ПтГг Frontend р╕гр╕зр╕Ър╕гр╕зр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕е (index.vue)
```javascript
// р╕гр╕зр╕Ър╕гр╕зр╕бр╕лр╣Йр╕нр╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Ир╕▓р╕Бр╕Чр╕╕р╕Бр╕нр╕▓р╕Др╕▓р╕г
const allRooms = [
  {
    id: "fe781e21-...",
    name: "NK 1201",
    description: "р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Ър╕гр╕гр╕вр╕▓р╕в р╕Кр╕▒р╣Йр╕Щр╕Чр╕╡р╣И2 р╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣И1",
    capacity: 40,
    building: "р╕нр╕▓р╕Др╕▓р╕гр╕Ър╕гр╕┤р╕лр╕▓р╕г",
    is_available: false
  },
  {
    id: "08503ff8-...",
    name: "NK 1202",
    description: "р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Ър╕гр╕гр╕вр╕▓р╕в р╕Кр╕▒р╣Йр╕Щр╕Чр╕╡р╣И2 р╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣И2",
    capacity: 80,
    building: "р╕нр╕▓р╕Др╕▓р╕гр╕Ър╕гр╕┤р╕лр╕▓р╕г",
    is_available: true
  }
  // ... р╕лр╣Йр╕нр╕Зр╕нр╕╖р╣Ир╕Щр╣Ж
]
```

### 3я╕ПтГг р╕кр╣Ир╕Зр╣Др╕Ыр╕Чр╕╡р╣И Backend API
```http
POST /api/ai-search
Content-Type: application/json

{
  "query": "р╕Йр╕▒р╕Щр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М",
  "rooms": [...allRooms],
  "buildings": [...buildings]
}
```

### 4я╕ПтГг Backend р╕кр╕гр╣Йр╕▓р╕З Prompt р╕кр╕│р╕лр╕гр╕▒р╕Ъ AI
```
р╕Др╕╕р╕Ур╣Ар╕Ыр╣Зр╕Щ AI р╕Ьр╕╣р╣Йр╕Кр╣Ир╕зр╕вр╕Др╣Йр╕Щр╕лр╕▓р╕лр╣Йр╕нр╕Зр╣Гр╕Щр╕гр╕░р╕Ър╕Ър╕Ир╕нр╕Зр╕лр╣Йр╕нр╕З

р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╣Йр╕нр╕З:
- NK 1201: р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Ър╕гр╕гр╕вр╕▓р╕в
- NK 1202: р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Ър╕гр╕гр╕вр╕▓р╕в
- Lab 301: р╕лр╣Йр╕нр╕Зр╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М  ЁЯСИ р╕Хр╕▒р╕зр╕Щр╕╡р╣Йр╕Ир╕░р╕Цр╕╣р╕Бр╣Ар╕ер╕╖р╕нр╕Б!

User р╕Цр╕▓р╕б: "р╕Йр╕▒р╕Щр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М"

р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Бр╕ер╕░р╕кр╣Ир╕Зр╕Др╕╖р╕Щ JSON:
{
  "filters": {
    "keywords": ["р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М", "р╕Др╕нр╕б", "р╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕г"]
  },
  "explanation": "р╕Др╕╕р╕Ур╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣Ир╕бр╕╡р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М"
}
```

### 5я╕ПтГг Gemini AI р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Бр╕ер╕░р╕Хр╕нр╕Ъ
```json
{
  "filters": {
    "capacity_min": null,
    "capacity_max": null,
    "keywords": ["р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М", "р╕Др╕нр╕б", "р╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕г"]
  },
  "explanation": "р╕Др╕╕р╕Ур╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣Ир╕бр╕╡р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣Мр╕лр╕гр╕╖р╕нр╕лр╣Йр╕нр╕Зр╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М"
}
```

### 6я╕ПтГг Backend р╕Бр╕гр╕нр╕Зр╕лр╣Йр╕нр╕З
```javascript
// р╕Др╣Йр╕Щр╕лр╕▓р╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣И description р╕бр╕╡р╕Др╕│р╕зр╣Ир╕▓
// "р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М" р╕лр╕гр╕╖р╕н "р╕Др╕нр╕б" р╕лр╕гр╕╖р╕н "р╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕г"

filteredRooms = rooms.filter(room => {
  const searchText = `${room.name} ${room.description} ${room.building}`.toLowerCase();
  
  return keywords.some(keyword => 
    searchText.includes(keyword.toLowerCase())
  );
});

// р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М:
// тЬЕ Lab 301 - р╕лр╣Йр╕нр╕Зр╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М
// тЬЕ Lab 302 - р╕лр╣Йр╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М
// тЭМ NK 1201 - р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕Ър╕гр╕гр╕вр╕▓р╕в (р╣Др╕бр╣Ир╕бр╕╡ keyword)
```

### 7я╕ПтГг р╕кр╣Ир╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Бр╕ер╕▒р╕Ъ Frontend
```json
{
  "success": true,
  "rooms": [
    {
      "id": "...",
      "name": "Lab 301",
      "description": "р╕лр╣Йр╕нр╕Зр╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М",
      "capacity": 40,
      "building": "р╕нр╕▓р╕Др╕▓р╕гр╣Ар╕Чр╕Др╣Вр╕Щр╣Вр╕ер╕вр╕╡"
    }
  ],
  "filters": { ... },
  "explanation": "р╕Др╕╕р╕Ур╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣Ир╕бр╕╡р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М",
  "total": 1
}
```

### 8я╕ПтГг Frontend р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М
```
тЬЕ р╕Юр╕Ъ 1 р╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣Ир╕Хр╕гр╕Зр╕Бр╕▒р╕Ър╕Др╕зр╕▓р╕бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г

ЁЯФН AI р╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕зр╣Ир╕▓: р╕Др╕╕р╕Ур╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣Ир╕бр╕╡р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М

ЁЯУН Lab 301
   ЁЯПв р╕нр╕▓р╕Др╕▓р╕гр╣Ар╕Чр╕Др╣Вр╕Щр╣Вр╕ер╕вр╕╡
   ЁЯСе 40 р╕Др╕Щ
   ЁЯУЭ р╕лр╣Йр╕нр╕Зр╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М
```

---

## тЭМ р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ъ: "Gemini API error"

### р╕кр╕▓р╣Ар╕лр╕Хр╕╕:
```javascript
const GEMINI_API_KEY = 'YOUR_GEMINI_API_KEY_HERE'; // тЭМ р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╣Бр╕Чр╕Щр╕Чр╕╡р╣И
```

### р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:
1. р╣Др╕Ыр╕Вр╕н API Key: https://aistudio.google.com/app/apikey
2. р╣Бр╕Чр╕Щр╕Чр╕╡р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╣М: `server/api/ai-search.post.ts`
```javascript
const GEMINI_API_KEY = 'AIzaSyC_YOUR_REAL_API_KEY'; // тЬЕ р╣Гр╕кр╣И API Key р╕Ир╕гр╕┤р╕З
```

---

## ЁЯОп р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓р╕Хр╣Ир╕▓р╕Зр╣Ж

### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Чр╕╡р╣И 1: р╕Др╣Йр╕Щр╕лр╕▓р╕лр╣Йр╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М
```
Input: "р╕Йр╕▒р╕Щр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М"

AI р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ:
{
  "keywords": ["р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М", "р╕Др╕нр╕б", "р╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕г"]
}

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: р╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣И description р╕бр╕╡ "р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М" р╕лр╕гр╕╖р╕н "р╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕г"
```

### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Чр╕╡р╣И 2: р╕Др╣Йр╕Щр╕лр╕▓р╕лр╣Йр╕нр╕Зр╕Ър╕гр╕гр╕вр╕▓р╕в
```
Input: "р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕Ър╕гр╕гр╕вр╕▓р╕в 80 р╕Др╕Щ"

AI р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ:
{
  "capacity_min": 80,
  "keywords": ["р╕Ър╕гр╕гр╕вр╕▓р╕в", "р╣Ар╕гр╕╡р╕вр╕Щ"]
}

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: р╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣И capacity >= 80 р╣Бр╕ер╕░р╕бр╕╡ "р╕Ър╕гр╕гр╕вр╕▓р╕в" р╣Гр╕Щ description
```

### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Чр╕╡р╣И 3: р╕Др╣Йр╕Щр╕лр╕▓р╕Хр╕▓р╕бр╕нр╕▓р╕Др╕▓р╕г
```
Input: "р╕лр╣Йр╕нр╕Зр╣Гр╕Щр╕нр╕▓р╕Др╕▓р╕гр╕Ър╕гр╕┤р╕лр╕▓р╕г"

AI р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ:
{
  "keywords": ["р╕Ър╕гр╕┤р╕лр╕▓р╕г"]
}

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: р╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣И building = "р╕нр╕▓р╕Др╕▓р╕гр╕Ър╕гр╕┤р╕лр╕▓р╕г"
```

---

## ЁЯФН р╕зр╕┤р╕Шр╕╡ Debug

### 1. р╣Ар╕Ыр╕┤р╕Ф Browser Console (F12)
```javascript
// р╕Ир╕░р╣Ар╕лр╣Зр╕Щ logs:
ЁЯУК Total rooms to search: 15
ЁЯФН Search query: р╕Йр╕▒р╕Щр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М
тЬЕ AI Response: { success: true, rooms: [...], ... }
```

### 2. р╣Ар╕Ыр╕┤р╕Ф Terminal (Dev Server)
```javascript
// р╕Ир╕░р╣Ар╕лр╣Зр╕Щ logs:
ЁЯдЦ AI Response: { "filters": { "keywords": ["р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М"] }, ... }
ЁЯФН Parsed Filters: { keywords: ["р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М", "р╕Др╕нр╕б"] }
тЬЕ Found 2 rooms matching filters
```

### 3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ API Key р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
```javascript
// р╕Цр╣Йр╕▓ API Key р╕Ьр╕┤р╕Фр╕Ир╕░р╣Ар╕лр╣Зр╕Щ:
тЭМ Gemini API error

// р╕Цр╣Йр╕▓ API Key р╕Цр╕╣р╕Бр╕Ир╕░р╣Ар╕лр╣Зр╕Щ:
тЬЕ Found X rooms matching filters
```

---

## ЁЯУЭ р╕кр╕гр╕╕р╕Ы Flow р╕кр╕▒р╣Йр╕Щр╣Ж

```
User Input 
  тЖТ Frontend р╕гр╕зр╕Ър╕гр╕зр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕е
  тЖТ р╕кр╣Ир╕Зр╣Др╕Ыр╕Чр╕╡р╣И Backend API
  тЖТ Backend р╕кр╕гр╣Йр╕▓р╕З Prompt
  тЖТ р╕кр╣Ир╕Зр╣Др╕Ыр╕Чр╕╡р╣И Gemini AI
  тЖТ AI р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Бр╕ер╕░р╕кр╣Ир╕З JSON р╕Бр╕ер╕▒р╕Ъ
  тЖТ Backend р╕Бр╕гр╕нр╕Зр╕лр╣Йр╕нр╕Зр╕Хр╕▓р╕б keywords
  тЖТ р╕кр╣Ир╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Бр╕ер╕▒р╕Ъ Frontend
  тЖТ р╣Бр╕кр╕Фр╕Зр╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣Ир╕Юр╕Ъ
```

**р╕Бр╕╕р╕Нр╣Бр╕Ир╕кр╕│р╕Др╕▒р╕Н:** 
- AI р╕Ир╕░р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Др╕│р╕Др╣Йр╕Щр╕лр╕▓р╣Бр╕ер╕░р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ `keywords`
- Backend р╕Др╣Йр╕Щр╕лр╕▓р╣Гр╕Щ `name`, `description`, `building` р╕Хр╕▓р╕б keywords
- р╕лр╣Йр╕нр╕Зр╕Чр╕╡р╣Ир╕бр╕╡ keyword р╣Гр╕Фр╣Ж р╕Ир╕░р╕Цр╕╣р╕Бр╣Бр╕кр╕Фр╕Зр╕Ьр╕е

---

р╕Цр╣Йр╕▓р╣Гр╕кр╣И API Key р╣Бр╕ер╣Йр╕зр╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Й р╣Гр╕лр╣Йр╕Фр╕╣ Console logs р╕Ир╕░р╕Ър╕нр╕Бр╕зр╣Ир╕▓р╕Хр╕┤р╕Фр╕Хр╕гр╕Зр╣Др╕лр╕Щ! ЁЯФН
